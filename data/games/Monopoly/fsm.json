{
    "states": {
        "INIT": {
            "init": "to floor [ :x ] [\n    return - :x % :x 1\n]\nto returnstr [ :s ] [\n    return :s\n]\nto updatemoney [ ] [\n    foreach [ :item fromgameclass \"moneytext ] [\n        removepiece :item\n    ]\n    \n]\nif == null :startgame [\n    make :startgame true\n    for [ :i 0 :game_playerCount 1 ] [\n        make :player getplayer :i\n        make :money item 0 fromplayer :player \"money\n        addtextobj :money fromgame + \"playermoneydz + :i 1 \"moneytext to moneyfunc [ :str ] [ return + \"money%20=%20 :str ]\n    ]\n]",
            "leave": "",
            "setValue": "",
            "to": "make :game_state_output \"ROLL"
        },
        "ROLL": {
            "init": "\nmake :dice fromgame \"dice\nmakeavailable :dice\n",
            "leave": "",
            "setValue": "make :game_doubles false\nmake :num1 + 1 floor rand 6\nmake :num2 + 1 floor rand 6\nmake :roll + :num1 :num2\nmake :piece item 0 fromplayer curplayer \"piece\nrepeat :roll [\n    make :dz objdz :piece\n    make :next dzfollow :dz [ \"Forward ]\n    movepiece :piece :next\n]\nmake :rollcombo ( + :num1 \",%20 :num2 )\nif == 0 len fromgameclass \"rolltext [\n    addtextobj :rollcombo :game_dicerolldz \"rolltext fvar returnstr\n]\n\nif == :num1 :num2 [ \n    make :game_doubles true\n]",
            "to": "make :piece item 0 fromplayer curplayer \"piece\nmake :dz objdz :piece\nifelse hasclass :dz \"tojail [\n    make :jaildz fromgame \"jaildz\n    movepiece :piece :jaildz\n    make :game_state_output \"DONE\n] [\n    ifelse != null fromgame + getid :dz \"card [\n        make :game_state_output \"PROMPT_BUY\n    ] [\n        make :game_state_output \"TRADE_ASK\n    ]\n]"
        },
        "PROMPT_BUY": {
            "init": "make :dz objdz :piece\nmake :card fromgame + getid :dz \"card\nmake :cost item 0 objchildrenofclass :card \"cost\nmake :prompt_dz1 fromgame \"promptdz1\nmake :prompt_dz2 fromgame \"promptdz2\nmake :prompt1 + \"Buy%20this%20property%20for%20$ :cost \nmake :prompt2 \"Dont%20buy%20this%20property\naddtextobj :prompt1 :prompt_dz1 \"ask_yes.ask fvar returnstr\naddtextobj :prompt2 :prompt_dz2 \"ask_no.ask fvar returnstr\nmakeallavailable fromgameclass \"ask",
            "leave": "",
            "setValue": "make :btn fromgame :game_state_input\nif hasclass :btn \"ask_yes [ \n    make :dz objdz :piece\n    make :card fromgame + getid :dz \"card\n    make :cost item 0 objchildrenofclass :card \"cost\n    make :moneyid getid item 0 fromplayer curplayer \"money\n    make :money fromgame :moneyid\n    make :money - :money :cost\n    additem :money :game_log\n    setfromid :moneyid :money\n    removeclass \"purchase :card\n    # updatemoney\n]",
            "to": "make :game_state_output \"TRADE_ASK"
        },
        "TRADE_ASK": {
            "init": "make :prompt1 \"Trade\nmake :prompt2 \"Don't%20trade\n\nmake :prompt_dz1 fromgame \"promptdz1\nmake :prompt_dz2 fromgame \"promptdz2\n\naddtextobj :prompt1 :prompt_dz1 \"ask_yes.ask fvar returnstr\naddtextobj :prompt2 :prompt_dz2 \"ask_no.ask fvar returnstr\nmakeallavailable fromgameclass \"ask",
            "leave": "",
            "setValue": "\n    removepiece item 0 fromgameclass \"ask_yes\n    removepiece item 0 fromgameclass \"ask_no\n",
            "to": "make :game_state_output \"DONE"
        },
        "DONE": {
            "init": "",
            "leave": "gotonextplayer",
            "setValue": "",
            "to": "make :game_state_output \"INIT"
        }
    },
    "goals": []
}