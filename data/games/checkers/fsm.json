{"states":{"INIT":{"init":"to pieceAvailable [ :dz ] [\n    make :moveset [ [ \"UpRight ] [ \"UpLeft ] [ \"DownRight ] [ \"DownLeft ] ]\n    ifelse == curplayer getplayer 0 [\n        make :moveset [ [ \"UpRight ] [ \"UpLeft ] ]\n    ] [\n        make :moveset [ [ \"DownRight ] [ \"DownLeft ] ]\n    ]\n\n    make :available [ ]\n    make :available_paths [ ]\n\n    foreach [ :path :moveset ] [\n        additem \"here1 :game_log\n        make :dz1 dzfollow :dz :path\n        additem \"here2 :game_log\n        if == null :dz1 [ continue ]\n        additem :dz1 :game_log\n        make :dz2 dzfollow :dz1 :path\n        additem \"here3 :game_log\n        if or == null :dz1 == null :dz2 [ continue ]\n        if ( and dzhasid \"obj :dz1   dzempty :dz2   != curplayer owner dzitem \"obj :dz1 ) [\n            additem :dz2 :available\n            additem [ :path :path ] :available_paths\n        ]\n        if dzempty :dz1 [\n            additem :dz1 :available\n            additem [ :path ] :available_paths\n        ]\n    ]\n\n    return [ :available :available_paths ]\n]\n","leave":"","setValue":"","to":"make :game_state_output \"CHOOSE_PIECE"},"CHOOSE_PIECE":{"init":"makeallavailable fromplayer curplayer \"piece","leave":"","setValue":"make :piece_selected fromgame :game_state_input\nmake :old_dz objdz :piece_selected","to":"make :game_state_output \"CHOOSE_SQUARE"},"CHOOSE_SQUARE":{"init":"make :available_items pieceAvailable :old_dz\nmake :available item 0 :available_items\nmake :available_paths item 1 :available_items\n\nmakeallavailable :available\n","leave":"","setValue":"make :old_dz objdz :piece_selected\nmake :choice_num index :old_dz :available\nmake :chosen_path item :choice_num :available_paths\n\nmake :dz fromgame :game_state_input\nmovepiece :piece_selected :dz\n\nif == 2 length :chosen_path [\n    make :dir item 0 :chosen_path\n    make :dz_cross dzfollow :old_dz [ :dir ]\n    make :item dzitem \"obj :dz_cross\n    if != null :piece [\n        removepiece :item fromgameclass \"piece\n    ]\n]\n","to":"make :game_state_output \"DONE"},"DONE":{"init":"","leave":"gotonextplayer","setValue":"","to":"make :game_state_output \"INIT"}},"goals":[]}