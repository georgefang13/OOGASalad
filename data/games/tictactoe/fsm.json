{
  "states": {
    "INIT": {
      "init": "to getAvailablePieces [ ] [ make :pieces fromplayer curplayer \"piece foreach [ :x :pieces ] [ make :dz objdz :x if and != null :dz not hasclass :dz \"board [ makeavailable :x ] ] ] to getAvailableSpots [ ] [ make :spots fromgameclass \"board make :game_log [ ] additem :spots :game_log foreach [ :spot :spots ] [ if == 0 len dzitems :spot [ makeavailable :spot ] ] ]",
      "leave": "",
      "setValue": "",
      "to": "make :game_state_output \"SELECTPIECE"
    },
    "SELECTPIECE": {
      "init": "getAvailablePieces",
      "leave": "",
      "setValue": "make :selected_piece fromgame :game_state_input",
      "to": "make :game_state_output \"SELECTZONE"
    },
    "SELECTZONE": {
      "init": "getAvailableSpots",
      "leave": "",
      "setValue": "movepiece :selected_piece fromgame :game_state_input",
      "to": "make :game_state_output \"DONE"
    },
    "DONE": {
      "init": "gotonextplayer",
      "leave": "",
      "setValue": "",
      "to": ""
    }
  },
  "goals": [
  "to blocked [ :x ] [ if dzempty :x [ return false ] return != curplayer owner item 0 dzitems :x ] foreach [ :dz fromgameclass \"board ] [ if dzempty :dz [ continue ] foreach [ :edge dzpaths :dz ] [ make :dzs dzfollowtoblock :dz [ :edge ] fvar blocked make :curspot item 0 dzitems :dz if and == curplayer owner :curspot == 2 len :dzs [ make :game_state_output curplayer return; ] ] ]"
  ]
}